{% macro status_badge(doc) %}
    {% if doc.discrepancies and doc.discrepancies|length > 0 %}
        <span id="status-{{ doc.id }}" class="px-2 py-1 text-xs rounded bg-red-900 text-red-200 border border-red-700">
            {{ doc.discrepancies|length }} Discrepancies
        </span>
    {% elif doc.is_invoice and not doc.contract_id %}
        <span id="status-{{ doc.id }}" class="px-2 py-1 text-xs rounded bg-yellow-900 text-yellow-200 border border-yellow-700">
            No Contract Match
        </span>
    {% elif doc.is_invoice and doc.contract_id %}
        <span id="status-{{ doc.id }}" class="px-2 py-1 text-xs rounded bg-green-900 text-green-200 border border-green-700">
            Matched
        </span>
    {% elif doc.is_contract %}
        <span id="status-{{ doc.id }}" class="px-2 py-1 text-xs rounded bg-gray-700 text-gray-300 border border-gray-600">
            Indexed {% if doc.linked_invoices %}<span class="ml-1 text-gray-400">({{ doc.linked_invoices|length }})</span>{% endif %}
        </span>
    {% elif doc.category == 'processing' %}
        <span id="status-{{ doc.id }}" class="px-2 py-1 text-xs rounded bg-blue-900/30 text-blue-200 border border-blue-700/50 animate-pulse">
            Processing
        </span>
    {% else %}
        <span id="status-{{ doc.id }}" class="px-2 py-1 text-xs rounded bg-gray-700 text-gray-300 border border-gray-600">
            {{ doc.category }}
        </span>
    {% endif %}
{% endmacro %}

{% macro type_icon(doc) %}
    {% if doc.is_invoice %}
        <i class="fa-solid fa-file-invoice-dollar text-green-400"></i>
    {% elif doc.is_contract %}
        <i class="fa-solid fa-file-contract text-blue-400"></i>
    {% elif doc.category == 'processing' %}
        <i class="fa-solid fa-circle-notch fa-spin text-primary"></i>
    {% elif doc.category == 'failed' %}
        <i class="fa-solid fa-circle-exclamation text-red-400"></i>
    {% else %}
        <i class="fa-solid fa-file text-gray-400"></i>
    {% endif %}
{% endmacro %}